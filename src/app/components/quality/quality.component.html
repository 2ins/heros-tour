<div fxLayout="row" *ngIf="quality">
  <ng-container *ngTemplateOutlet="header"></ng-container>
  <div
    fxFlex.gt-sm="60%"
    style="padding: 10px; padding-top: 40px; margin: 10px"
  >
    <div
      class="inline"
      style="
        border: solid gray 1px;
        padding: 0;
        width: 100%;
        border-radius: 5%;
        text-align: center;
      "
      [ngClass]="quality.virtue"
    >
      <h1 style="color: green">{{ quality.name }}</h1>
      <div style="margin-bottom: 10px">
        <div *ngIf="quality != undefined">
          <div
            *ngFor="let a of quality.tags"
            style="display: inline; color: green"
          >
            {{ a }},
          </div>
        </div>
      </div>
      <p style="text-align: center">
        <i style="color: black; font-size: xx-small">
          {{ quality.virtue | virtueFinder }}
        </i>
      </p>

      <div
        [ngClass]="{
          widthDesktop: !mobileService.isMobile(),
          widthMobile: mobileService.isMobile()
        }"
      >
        <img
          width="100%"
          src="{{
            'https://enrgmsdppekwfvmbdxsl.supabase.co/storage/v1/object/public/q/' +
              quality.id +
              '.jpg'
          }}"
        />
      </div>

      <br />
      <p *ngIf="!editMode">{{ quality.description }}</p>
      <!--
 <button *ngIf="!editMode" (click)="appendQueryParam()">edit</button>
  <button
    *ngIf="editMode"
    (click)="editMode = false"
    [routerLink]="['/qualities/quality/', quality?.id]"
  >
    update
  </button>
  -->
    </div>
    <br /><br />
    <div>
      <h1 style="color: green">In Depth</h1>
      {{ qualityDesc }}
      <br /><br />
      <div *ngIf="quality">
        <div *ngIf="quality.activities">
          <h1 style="color: green">Activities for this Archtype</h1>

          <div *ngIf="quality.activities">
            <div
              *ngFor="let a of quality.activities"
              style="display: inline; color: blue"
            >
              <p
                style="cursor: pointer"
                routerLink="/activities/activity/{{ a.id }}"
              >
                #{{ a.name }}

                ({{ a.count }})
              </p>
            </div>
          </div>
        </div>
      </div>
      <br />
    </div>
  </div>
  <ng-template #header>
    <div
      style="
        float: left;
        width: 100%;
        z-index: 0;
        margin-bottom: 20px;
        background-color: white;
        border: solid grey 1px;
        position: fixed;
        z-index: 10;
      "
    >
      <div style="border-bottom: 0px solid black">
        <button mat-button (click)="backClicked()">
          <mat-icon>arrow_back</mat-icon>
        </button>
        strenght: <b>{{ quality.name }}</b>
      </div>
    </div>
  </ng-template>
</div>
